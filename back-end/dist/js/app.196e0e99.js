(function(){"use strict";var t={4640:function(t,e,r){var o=r(5130),s=r(6768);const n={class:"page-wrap"};function a(t,e,r,o,a,i){const c=(0,s.g2)("nav-bar"),u=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(c,{user:a.user},null,8,["user"]),(0,s.Lk)("div",n,[(0,s.bF)(u,{user:a.user},null,8,["user"])])],64)}const i={class:"nav-bar"},c={class:"logo-wrap"},u=["src"],d={class:"nav-buttons-wrap"};function l(t,e,r,o,n,a){const l=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",i,[(0,s.bF)(l,{to:"/products",class:"products-link"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",c,[(0,s.Lk)("img",{src:n.logo},null,8,u)])])),_:1}),(0,s.Lk)("div",d,[r.user?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:e[0]||(e[0]=(...t)=>a.signOut&&a.signOut(...t))},"Sign Out")):(0,s.Q3)("",!0),(0,s.bF)(l,{to:"/cart"},{default:(0,s.k6)((()=>e[1]||(e[1]=[(0,s.Lk)("button",null,"Shopping cart",-1)]))),_:1})])])}r(4114);var p=r.p+"img/logo-hexagon.d2768201.svg",m=r(5955),h={name:"NavBar",props:["user"],data(){return{logo:p}},methods:{async signOut(){const t=(0,m.xI)();await(0,m.CI)(t),this.$router.push("/products")}}},g=r(1241);const v=(0,g.A)(h,[["render",l]]);var f=v,k={name:"App",components:{NavBar:f},data(){return{user:null}},created(){const t=(0,m.xI)();(0,m.hg)(t,(t=>{this.user=t}))}};const C=(0,g.A)(k,[["render",a]]);var b=C,y=r(1387);const L={key:0},I={key:1};function w(t,e,r,o,n,a){const i=(0,s.g2)("ShoppingCartList");return(0,s.uX)(),(0,s.CE)(s.FK,null,[e[1]||(e[1]=(0,s.Lk)("h1",null,"Shopping Cart",-1)),n.cartItems.length>0?((0,s.uX)(),(0,s.CE)("div",L,[(0,s.bF)(i,{products:n.cartItems,onRemoveFromCart:e[0]||(e[0]=t=>a.removeFromCart(t))},null,8,["products"])])):((0,s.uX)(),(0,s.CE)("div",I,"You currently have no items in cart."))],64)}var F=r(4232);const S=["src"],_={class:"details-wrap"},E=["onClick"];var A={__name:"ShoppingCartList",props:["products"],emits:["remove-from-cart"],setup(t){return(e,r)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.products,(t=>((0,s.uX)(),(0,s.CE)("div",{class:"product-container",key:t.id},[(0,s.Lk)("img",{src:t.imageUrl,class:"product-image"},null,8,S),(0,s.Lk)("div",_,[(0,s.Lk)("h3",null,(0,F.v_)(t.name),1),(0,s.Lk)("p",null,(0,F.v_)(t.price),1)]),(0,s.Lk)("button",{onClick:r=>e.$emit("remove-from-cart",t.id),class:"remove-button"},"Remove from Cart",8,E)])))),128)),r[0]||(r[0]=(0,s.Lk)("button",{class:"checkout-button"},"Proceed to Checkout",-1))],64))}};const X=A;var O=X,$=r(4373),P={name:"ShoppingCartPage",props:["user"],components:{ShoppingCartList:O},data(){return{cartItems:[]}},watch:{async user(t,e){if(e){const t=await $.A.get(`/api/users/${e.uid}/cart`),r=t.data;this.cartItems=r}}},created(){this.fetchCartItemsOnCreated()},methods:{async removeFromCart(t){try{const e=await $.A.delete(`/api/users/${this.user.uid}/cart/${t}`);200===e.status&&(this.cartItems=e.data)}catch(e){console.error("Error removing product:",e.response?.data||e.message),alert("Failed to remove product. Please try again.")}},async fetchCartItemsOnCreated(){if(this.user){const t=await $.A.get(`/api/users/${this.user.uid}/cart`),e=t.data;this.cartItems=e}}}};const x=(0,g.A)(P,[["render",w]]);var B=x;function j(t,e,r,o,n,a){const i=(0,s.g2)("products-list");return(0,s.uX)(),(0,s.CE)(s.FK,null,[e[0]||(e[0]=(0,s.Lk)("h1",null,"Products",-1)),(0,s.bF)(i,{products:n.products},null,8,["products"])],64)}const K={class:"grid-wrap"},T=["src"],M={class:"product-name"},W={class:"product-price"};var N={__name:"ProductsList",props:["products"],setup(t){const e=(0,s.EW)((()=>t=>`/products/${t}`));return(r,o)=>{const n=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",K,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.products,(t=>((0,s.uX)(),(0,s.CE)("div",{class:"product-item",key:t.id},[(0,s.Lk)("img",{src:t.imageUrl},null,8,T),(0,s.Lk)("h3",M,(0,F.v_)(t.name),1),(0,s.Lk)("p",W,(0,F.v_)(t.price),1),(0,s.bF)(n,{to:e.value(t.id)},{default:(0,s.k6)((()=>o[0]||(o[0]=[(0,s.Lk)("button",null,"View Details",-1)]))),_:2},1032,["to"])])))),128))])}}};const Q=N;var D=Q,R={name:"ProductsPage",components:{ProductsList:D},data(){return{products:[]}},async created(){const t=await $.A.get("/api/products"),e=t.data;this.products=e}};const U=(0,g.A)(R,[["render",j]]);var V=U;const G={key:0},q={class:"img-wrap"},Y=["src"],J={class:"product-details"},z={class:"price"},H=["disabled"],Z={key:1};function tt(t,e,r,o,n,a){const i=(0,s.g2)("base-spinner"),c=(0,s.g2)("user-auth"),u=(0,s.g2)("base-dialog"),d=(0,s.g2)("not-found-page");return n.product?((0,s.uX)(),(0,s.CE)("div",G,[(0,s.Lk)("div",q,[(0,s.Lk)("img",{src:n.product.imageUrl},null,8,Y)]),(0,s.Lk)("div",J,[(0,s.Lk)("h1",null,(0,F.v_)(n.product.name),1),(0,s.Lk)("h3",z,(0,F.v_)(n.product.price),1),r.user?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:e[0]||(e[0]=(...t)=>a.addToCart&&a.addToCart(...t)),class:(0,F.C4)({"grey-button":a.isInCart,"add-to-cart":!a.isInCart}),disabled:a.isInCart},(0,F.v_)(a.isInCart?"Already in Cart":"Add to Cart"),11,H)):((0,s.uX)(),(0,s.CE)("button",{key:1,class:"sign-in",onClick:e[1]||(e[1]=(...t)=>a.toggleForm&&a.toggleForm(...t))},"Sign in to add to cart")),(0,s.bF)(u,{show:n.isOpen,title:a.title,onClose:a.toggleForm},{default:(0,s.k6)((()=>[n.isLoading?((0,s.uX)(),(0,s.Wv)(i,{key:0})):(0,s.Q3)("",!0),n.isSignedFromEmailLink?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(c,{key:1,onSubmitForm:a.singIn,onClose:a.toggleForm},null,8,["onSubmitForm","onClose"]))])),_:1},8,["show","title","onClose"])])])):((0,s.uX)(),(0,s.CE)("div",Z,[(0,s.bF)(d)]))}r(8111),r(3579);const et={key:0,open:""},rt={key:0};function ot(t,e,r,n,a,i){return(0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[r.show?((0,s.uX)(),(0,s.CE)("div",{key:0,onClick:e[0]||(e[0]=(...t)=>i.close&&i.close(...t)),class:"backdrop"})):(0,s.Q3)("",!0),(0,s.bF)(o.eB,{name:"dialog"},{default:(0,s.k6)((()=>[r.show?((0,s.uX)(),(0,s.CE)("dialog",et,[(0,s.Lk)("header",null,[(0,s.RG)(t.$slots,"header",{},(()=>[(0,s.Lk)("h2",null,(0,F.v_)(r.title),1)]),!0)]),(0,s.Lk)("section",null,[(0,s.RG)(t.$slots,"default",{},void 0,!0)]),r.fixed?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("menu",rt,[(0,s.RG)(t.$slots,"actions",{},(()=>[(0,s.Lk)("button",{onClick:e[1]||(e[1]=(...t)=>i.close&&i.close(...t))},"Close")]),!0)]))])):(0,s.Q3)("",!0)])),_:3})])}var st={emits:["close"],props:{show:{type:Boolean,required:!0},title:{type:String,required:!1},fixed:{type:Boolean,required:!1,default:!1}},methods:{close(){this.$emit("close")}}};const nt=(0,g.A)(st,[["render",ot],["__scopeId","data-v-def88246"]]);var at=nt;const it={class:"spinner"};function ct(t,e){return(0,s.uX)(),(0,s.CE)("div",it,e[0]||(e[0]=[(0,s.Lk)("div",{class:"lds-roller"},[(0,s.Lk)("div"),(0,s.Lk)("div"),(0,s.Lk)("div"),(0,s.Lk)("div"),(0,s.Lk)("div"),(0,s.Lk)("div"),(0,s.Lk)("div"),(0,s.Lk)("div")],-1)]))}const ut={},dt=(0,g.A)(ut,[["render",ct],["__scopeId","data-v-075c3c3c"]]);var lt=dt;const pt={class:"form-control"},mt={key:0};function ht(t,e,r,n,a,i){const c=(0,s.g2)("base-card");return(0,s.uX)(),(0,s.Wv)(c,null,{default:(0,s.k6)((()=>[(0,s.Lk)("form",{onSubmit:e[1]||(e[1]=(0,o.D$)(((...t)=>i.submitForm&&i.submitForm(...t)),["prevent"]))},[(0,s.Lk)("div",pt,[e[2]||(e[2]=(0,s.Lk)("label",{for:"email"},"E-Mail",-1)),(0,s.bo)((0,s.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":e[0]||(e[0]=t=>a.email=t)},null,512),[[o.Jo,a.email,void 0,{trim:!0}]])]),a.formIsValid?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("p",mt," Please enter a valid email. ")),e[3]||(e[3]=(0,s.Lk)("button",null,"Submit",-1))],32)])),_:1})}const gt={class:"card"};function vt(t,e){return(0,s.uX)(),(0,s.CE)("div",gt,[(0,s.RG)(t.$slots,"default",{},void 0,!0)])}const ft={},kt=(0,g.A)(ft,[["render",vt],["__scopeId","data-v-963bcaee"]]);var Ct=kt,bt={components:{BaseCard:Ct},emits:["submitForm"],data(){return{email:"",formIsValid:!0}},methods:{async submitForm(){this.formIsValid=!0,""!==this.email&&this.email.includes("@")?this.$emit("submitForm",this.email):this.formIsValid=!1}}};const yt=(0,g.A)(bt,[["render",ht],["__scopeId","data-v-2a8573f9"]]);var Lt=yt;function It(t,e,r,o,n,a){return(0,s.uX)(),(0,s.CE)("h1",null,"404: Page Not Found")}var wt={name:"NotFoundPage"};const Ft=(0,g.A)(wt,[["render",It]]);var St=Ft,_t={name:"ProductDetailPage",props:["user"],components:{UserAuth:Lt,NotFoundPage:St,BaseSpinner:lt,BaseDialog:at},data(){return{product:{},cartItems:[],isOpen:!1,isLoading:!1,isSuccess:!1,isSignedFromEmailLink:!1}},created(){this.isSignedInWithEmailLink(),this.fetchProduct(),this.fetchCartItems()},watch:{async user(t){if(t){const e=await $.A.get(`/api/users/${t.uid}/cart`),r=e.data;this.cartItems=r}}},methods:{async addToCart(){const t=this.$route.params.productId;await $.A.post(`/api/users/${this.user.uid}/cart`,{id:t}),alert("Successfully added to cart!"),this.fetchCartItems()},async fetchProduct(){const t=this.$route.params.productId,e=await $.A.get(`/api/products/${t}`),r=e.data;this.product=r},async fetchCartItems(){if(this.user){const t=await $.A.get(`/api/users/${this.user.uid}/cart`);console.log(t);const e=t.data;this.cartItems=e}},async singIn(t){this.isLoading=!0;const e=(0,m.xI)(),r={url:`https://e-commerce-site-5khi.onrender.com/products/${this.$route.params.productId}`,handleCodeInApp:!0};await(0,m.MN)(e,t,r),window.localStorage.setItem("emailForSignIn",t),this.isLoading=!1,this.isSuccess=!0,setTimeout((()=>{this.isOpen=!1}),5e3)},async isSignedInWithEmailLink(){const t=(0,m.xI)();if((0,m.Pj)(t,window.location.href)){const r=window.localStorage.getItem("emailForSignIn");if(r)try{await(0,m.hK)(t,r,window.location.href),this.isOpen=!0,this.isSignedFromEmailLink=!0,setTimeout((()=>{this.isSignedFromEmailLink=!1,this.isOpen=!1}),3e3),window.localStorage.removeItem("emailForSignIn")}catch(e){console.error("Error signing in:",e)}else console.error("No email provided.")}},toggleForm(){this.isOpen=!this.isOpen}},computed:{isInCart(){return this.cartItems.some((t=>t.id===this.$route.params.productId))},title(){switch(!0){case this.isLoading:return"Authenticating...";case this.isSuccess:return"A login link was sent to the email you provided.";case this.isSignedFromEmailLink:return"Successfully signed in!";default:return"Enter your e-mail"}}}};const Et=(0,g.A)(_t,[["render",tt]]);var At=Et,Xt=r(6400);const Ot={apiKey:"AIzaSyDHwS8BZMUmKvAe8BqrhYs7JP7G0KI5FYM",authDomain:"e-commerce-demo-vue-e29e2.firebaseapp.com",projectId:"e-commerce-demo-vue-e29e2",storageBucket:"e-commerce-demo-vue-e29e2.firebasestorage.app",messagingSenderId:"835473175978",appId:"1:835473175978:web:d88a8fc10b80e0db3327d3"};(0,Xt.Wp)(Ot),(0,o.Ef)(b).use(y.aE({history:y.LA("/"),routes:[{path:"/",redirect:"/products"},{path:"/products",component:V,props:!0},{path:"/cart",component:B},{path:"/products/:productId",component:At},{path:"/:pathMatch(.*)*",component:St}],scrollBehavior(t,e,r){return r||{left:0,top:0}}})).mount("#app")}},e={};function r(o){var s=e[o];if(void 0!==s)return s.exports;var n=e[o]={exports:{}};return t[o].call(n.exports,n,n.exports,r),n.exports}r.m=t,function(){var t=[];r.O=function(e,o,s,n){if(!o){var a=1/0;for(d=0;d<t.length;d++){o=t[d][0],s=t[d][1],n=t[d][2];for(var i=!0,c=0;c<o.length;c++)(!1&n||a>=n)&&Object.keys(r.O).every((function(t){return r.O[t](o[c])}))?o.splice(c--,1):(i=!1,n<a&&(a=n));if(i){t.splice(d--,1);var u=s();void 0!==u&&(e=u)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[o,s,n]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){r.p="/"}(),function(){var t={524:0};r.O.j=function(e){return 0===t[e]};var e=function(e,o){var s,n,a=o[0],i=o[1],c=o[2],u=0;if(a.some((function(e){return 0!==t[e]}))){for(s in i)r.o(i,s)&&(r.m[s]=i[s]);if(c)var d=c(r)}for(e&&e(o);u<a.length;u++)n=a[u],r.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return r.O(d)},o=self["webpackChunke_commerce_full_stack_vue_demo"]=self["webpackChunke_commerce_full_stack_vue_demo"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=r.O(void 0,[504],(function(){return r(4640)}));o=r.O(o)})();
//# sourceMappingURL=app.196e0e99.js.map