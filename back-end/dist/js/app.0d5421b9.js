(function(){"use strict";var t={8318:function(t,e,r){var o=r(5130),s=r(6768);const n={class:"page-wrap"};function i(t,e,r,o,i,a){const c=(0,s.g2)("nav-bar"),u=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(c,{user:i.user},null,8,["user"]),(0,s.Lk)("div",n,[(0,s.bF)(u,{user:i.user},null,8,["user"])])],64)}const a={class:"nav-bar"},c={class:"logo-wrap"},u=["src"],d={class:"nav-buttons-wrap"};function l(t,e,r,o,n,i){const l=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",a,[(0,s.bF)(l,{to:"/products",class:"products-link"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",c,[(0,s.Lk)("img",{src:n.logo},null,8,u)])])),_:1}),(0,s.Lk)("div",d,[r.user?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:e[0]||(e[0]=(...t)=>i.signOut&&i.signOut(...t))},"Sign Out")):(0,s.Q3)("",!0),(0,s.bF)(l,{to:"/cart"},{default:(0,s.k6)((()=>e[1]||(e[1]=[(0,s.Lk)("button",null,"Shopping cart",-1)]))),_:1})])])}r(4114);var p=r.p+"img/logo-hexagon.d2768201.svg",m=r(5955),h={name:"NavBar",props:["user"],data(){return{logo:p}},methods:{async signOut(){const t=(0,m.xI)();await(0,m.CI)(t),this.$router.push("/products")}}},g=r(1241);const v=(0,g.A)(h,[["render",l]]);var f=v,k={name:"App",components:{NavBar:f},data(){return{user:null}},created(){const t=(0,m.xI)();(0,m.hg)(t,(t=>{this.user=t}))}};const C=(0,g.A)(k,[["render",i]]);var b=C,y=r(1387);const L={key:0},I={key:1};function w(t,e,r,o,n,i){const a=(0,s.g2)("ShoppingCartList");return(0,s.uX)(),(0,s.CE)(s.FK,null,[e[1]||(e[1]=(0,s.Lk)("h1",null,"Shopping Cart",-1)),n.cartItems.length>0?((0,s.uX)(),(0,s.CE)("div",L,[(0,s.bF)(a,{products:n.cartItems,onRemoveFromCart:e[0]||(e[0]=t=>i.removeFromCart(t))},null,8,["products"])])):((0,s.uX)(),(0,s.CE)("div",I,"You currently have no items in cart."))],64)}var F=r(4232);const _=["src"],S={class:"details-wrap"},E=["onClick"];var A={__name:"ShoppingCartList",props:["products"],emits:["remove-from-cart"],setup(t){return(e,r)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.products,(t=>((0,s.uX)(),(0,s.CE)("div",{class:"product-container",key:t.id},[(0,s.Lk)("img",{src:t.imageUrl,class:"product-image"},null,8,_),(0,s.Lk)("div",S,[(0,s.Lk)("h3",null,(0,F.v_)(t.name),1),(0,s.Lk)("p",null,(0,F.v_)(t.price),1)]),(0,s.Lk)("button",{onClick:r=>e.$emit("remove-from-cart",t.id),class:"remove-button"},"Remove from Cart",8,E)])))),128)),r[0]||(r[0]=(0,s.Lk)("button",{class:"checkout-button"},"Proceed to Checkout",-1))],64))}};const X=A;var O=X,$=r(4373),P={name:"ShoppingCartPage",props:["user"],components:{ShoppingCartList:O},data(){return{cartItems:[]}},watch:{async user(t,e){if(e){const t=await $.A.get(`/api/users/${e.uid}/cart`),r=t.data;this.cartItems=r}}},created(){this.fetchCartItemsOnCreated()},methods:{async removeFromCart(t){try{const e=await $.A.delete(`/api/users/${this.user.uid}/cart/${t}`);200===e.status&&(this.cartItems=e.data)}catch(e){console.error("Error removing product:",e.response?.data||e.message),alert("Failed to remove product. Please try again.")}},async fetchCartItemsOnCreated(){if(this.user){const t=await $.A.get(`/api/users/${this.user.uid}/cart`),e=t.data;this.cartItems=e}}}};const x=(0,g.A)(P,[["render",w]]);var B=x;function j(t,e,r,o,n,i){const a=(0,s.g2)("products-list");return(0,s.uX)(),(0,s.CE)(s.FK,null,[e[0]||(e[0]=(0,s.Lk)("h1",null,"Products",-1)),(0,s.bF)(a,{products:n.products},null,8,["products"])],64)}const K={class:"grid-wrap"},T=["src"],M={class:"product-item__details"},W={class:"product-name"},N={class:"product-price"};var Q={__name:"ProductsList",props:["products"],setup(t){const e=(0,s.EW)((()=>t=>`/products/${t}`));function r(t){const e=["bg-green","bg-yellow","bg-orange"];return e[t%e.length]}return(o,n)=>{const i=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",K,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.products,((t,o)=>((0,s.uX)(),(0,s.CE)("div",{class:"product-item",key:t.id},[(0,s.Lk)("div",{class:(0,F.C4)(["product-item__img-cont",r(o)])},[(0,s.Lk)("img",{src:t.imageUrl},null,8,T)],2),(0,s.Lk)("div",M,[(0,s.Lk)("h3",W,(0,F.v_)(t.nae),1),(0,s.Lk)("p",N,(0,F.v_)(t.price),1),(0,s.bF)(i,{to:e.value(t.id)},{default:(0,s.k6)((()=>n[0]||(n[0]=[(0,s.Lk)("button",null,"View Details",-1)]))),_:2},1032,["to"])])])))),128))])}}};const D=Q;var R=D,U={name:"ProductsPage",components:{ProductsList:R},data(){return{products:[]}},async created(){const t=await $.A.get("/api/products"),e=t.data;this.products=e}};const V=(0,g.A)(U,[["render",j]]);var G=V;const q={key:0},Y={class:"img-wrap"},J=["src"],z={class:"product-details"},H={class:"price"},Z=["disabled"],tt={key:1};function et(t,e,r,o,n,i){const a=(0,s.g2)("base-spinner"),c=(0,s.g2)("user-auth"),u=(0,s.g2)("base-dialog"),d=(0,s.g2)("not-found-page");return n.product?((0,s.uX)(),(0,s.CE)("div",q,[(0,s.Lk)("div",Y,[(0,s.Lk)("img",{src:n.product.imageUrl},null,8,J)]),(0,s.Lk)("div",z,[(0,s.Lk)("h1",null,(0,F.v_)(n.product.name),1),(0,s.Lk)("h3",H,(0,F.v_)(n.product.price),1),r.user?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:e[0]||(e[0]=(...t)=>i.addToCart&&i.addToCart(...t)),class:(0,F.C4)({"grey-button":i.isInCart,"add-to-cart":!i.isInCart}),disabled:i.isInCart},(0,F.v_)(i.isInCart?"Already in Cart":"Add to Cart"),11,Z)):((0,s.uX)(),(0,s.CE)("button",{key:1,class:"sign-in",onClick:e[1]||(e[1]=(...t)=>i.toggleForm&&i.toggleForm(...t))},"Sign in to add to cart")),(0,s.bF)(u,{show:n.isOpen,title:i.title,onClose:i.toggleForm},{default:(0,s.k6)((()=>[n.isLoading?((0,s.uX)(),(0,s.Wv)(a,{key:0})):(0,s.Q3)("",!0),n.isSignedFromEmailLink?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(c,{key:1,onSubmitForm:i.singIn,onClose:i.toggleForm},null,8,["onSubmitForm","onClose"]))])),_:1},8,["show","title","onClose"])])])):((0,s.uX)(),(0,s.CE)("div",tt,[(0,s.bF)(d)]))}r(8111),r(3579);const rt={key:0,open:""},ot={key:0};function st(t,e,r,n,i,a){return(0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[r.show?((0,s.uX)(),(0,s.CE)("div",{key:0,onClick:e[0]||(e[0]=(...t)=>a.close&&a.close(...t)),class:"backdrop"})):(0,s.Q3)("",!0),(0,s.bF)(o.eB,{name:"dialog"},{default:(0,s.k6)((()=>[r.show?((0,s.uX)(),(0,s.CE)("dialog",rt,[(0,s.Lk)("header",null,[(0,s.RG)(t.$slots,"header",{},(()=>[(0,s.Lk)("h2",null,(0,F.v_)(r.title),1)]),!0)]),(0,s.Lk)("section",null,[(0,s.RG)(t.$slots,"default",{},void 0,!0)]),r.fixed?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("menu",ot,[(0,s.RG)(t.$slots,"actions",{},(()=>[(0,s.Lk)("button",{onClick:e[1]||(e[1]=(...t)=>a.close&&a.close(...t))},"Close")]),!0)]))])):(0,s.Q3)("",!0)])),_:3})])}var nt={emits:["close"],props:{show:{type:Boolean,required:!0},title:{type:String,required:!1},fixed:{type:Boolean,required:!1,default:!1}},methods:{close(){this.$emit("close")}}};const it=(0,g.A)(nt,[["render",st],["__scopeId","data-v-e3940418"]]);var at=it;const ct={class:"spinner"};function ut(t,e){return(0,s.uX)(),(0,s.CE)("div",ct,e[0]||(e[0]=[(0,s.Lk)("div",{class:"lds-roller"},[(0,s.Lk)("div"),(0,s.Lk)("div"),(0,s.Lk)("div"),(0,s.Lk)("div"),(0,s.Lk)("div"),(0,s.Lk)("div"),(0,s.Lk)("div"),(0,s.Lk)("div")],-1)]))}const dt={},lt=(0,g.A)(dt,[["render",ut],["__scopeId","data-v-075c3c3c"]]);var pt=lt;const mt={class:"form-control"},ht={key:0};function gt(t,e,r,n,i,a){const c=(0,s.g2)("base-card");return(0,s.uX)(),(0,s.Wv)(c,null,{default:(0,s.k6)((()=>[(0,s.Lk)("form",{onSubmit:e[1]||(e[1]=(0,o.D$)(((...t)=>a.submitForm&&a.submitForm(...t)),["prevent"]))},[(0,s.Lk)("div",mt,[e[2]||(e[2]=(0,s.Lk)("label",{for:"email"},"E-Mail",-1)),(0,s.bo)((0,s.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":e[0]||(e[0]=t=>i.email=t)},null,512),[[o.Jo,i.email,void 0,{trim:!0}]])]),i.formIsValid?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("p",ht," Please enter a valid email. ")),e[3]||(e[3]=(0,s.Lk)("button",null,"Submit",-1))],32)])),_:1})}const vt={class:"card"};function ft(t,e){return(0,s.uX)(),(0,s.CE)("div",vt,[(0,s.RG)(t.$slots,"default",{},void 0,!0)])}const kt={},Ct=(0,g.A)(kt,[["render",ft],["__scopeId","data-v-1932e334"]]);var bt=Ct,yt={components:{BaseCard:bt},emits:["submitForm"],data(){return{email:"",formIsValid:!0}},methods:{async submitForm(){this.formIsValid=!0,""!==this.email&&this.email.includes("@")?this.$emit("submitForm",this.email):this.formIsValid=!1}}};const Lt=(0,g.A)(yt,[["render",gt],["__scopeId","data-v-2a8573f9"]]);var It=Lt;function wt(t,e,r,o,n,i){return(0,s.uX)(),(0,s.CE)("h1",null,"404: Page Not Found")}var Ft={name:"NotFoundPage"};const _t=(0,g.A)(Ft,[["render",wt]]);var St=_t,Et={name:"ProductDetailPage",props:["user"],components:{UserAuth:It,NotFoundPage:St,BaseSpinner:pt,BaseDialog:at},data(){return{product:{},cartItems:[],isOpen:!1,isLoading:!1,isSuccess:!1,isSignedFromEmailLink:!1}},created(){this.isSignedInWithEmailLink(),this.fetchProduct(),this.fetchCartItems()},watch:{async user(t){if(t){const e=await $.A.get(`/api/users/${t.uid}/cart`),r=e.data;this.cartItems=r}}},methods:{async addToCart(){const t=this.$route.params.productId;await $.A.post(`/api/users/${this.user.uid}/cart`,{id:t}),alert("Successfully added to cart!"),this.fetchCartItems()},async fetchProduct(){const t=this.$route.params.productId,e=await $.A.get(`/api/products/${t}`),r=e.data;this.product=r},async fetchCartItems(){if(this.user){const t=await $.A.get(`/api/users/${this.user.uid}/cart`);console.log(t);const e=t.data;this.cartItems=e}},async singIn(t){this.isLoading=!0;const e=(0,m.xI)(),r={url:`https://e-commerce-site-5khi.onrender.com/products/${this.$route.params.productId}`,handleCodeInApp:!0};await(0,m.MN)(e,t,r),window.localStorage.setItem("emailForSignIn",t),this.isLoading=!1,this.isSuccess=!0,setTimeout((()=>{this.isOpen=!1}),5e3)},async isSignedInWithEmailLink(){const t=(0,m.xI)();if((0,m.Pj)(t,window.location.href)){const r=window.localStorage.getItem("emailForSignIn");if(r)try{await(0,m.hK)(t,r,window.location.href),this.isOpen=!0,this.isSignedFromEmailLink=!0,setTimeout((()=>{this.isSignedFromEmailLink=!1,this.isOpen=!1}),3e3),window.localStorage.removeItem("emailForSignIn")}catch(e){console.error("Error signing in:",e)}else console.error("No email provided.")}},toggleForm(){this.isOpen=!this.isOpen}},computed:{isInCart(){return this.cartItems.some((t=>t.id===this.$route.params.productId))},title(){switch(!0){case this.isLoading:return"Authenticating...";case this.isSuccess:return"A login link was sent to the email you provided.";case this.isSignedFromEmailLink:return"Successfully signed in!";default:return"Enter your e-mail"}}}};const At=(0,g.A)(Et,[["render",et]]);var Xt=At,Ot=r(6400);const $t="AIzaSyDHwS8BZMUmKvAe8BqrhYs7JP7G0KI5FYM",Pt={apiKey:$t,authDomain:"e-commerce-demo-vue-e29e2.firebaseapp.com",projectId:"e-commerce-demo-vue-e29e2",storageBucket:"e-commerce-demo-vue-e29e2.firebasestorage.app",messagingSenderId:"835473175978",appId:"1:835473175978:web:d88a8fc10b80e0db3327d3"};(0,Ot.Wp)(Pt),(0,o.Ef)(b).use(y.aE({history:y.LA("/"),routes:[{path:"/",redirect:"/products"},{path:"/products",component:G,props:!0},{path:"/cart",component:B},{path:"/products/:productId",component:Xt},{path:"/:pathMatch(.*)*",component:St}],scrollBehavior(t,e,r){return r||{left:0,top:0}}})).mount("#app")}},e={};function r(o){var s=e[o];if(void 0!==s)return s.exports;var n=e[o]={exports:{}};return t[o].call(n.exports,n,n.exports,r),n.exports}r.m=t,function(){var t=[];r.O=function(e,o,s,n){if(!o){var i=1/0;for(d=0;d<t.length;d++){o=t[d][0],s=t[d][1],n=t[d][2];for(var a=!0,c=0;c<o.length;c++)(!1&n||i>=n)&&Object.keys(r.O).every((function(t){return r.O[t](o[c])}))?o.splice(c--,1):(a=!1,n<i&&(i=n));if(a){t.splice(d--,1);var u=s();void 0!==u&&(e=u)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[o,s,n]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){r.p="/"}(),function(){var t={524:0};r.O.j=function(e){return 0===t[e]};var e=function(e,o){var s,n,i=o[0],a=o[1],c=o[2],u=0;if(i.some((function(e){return 0!==t[e]}))){for(s in a)r.o(a,s)&&(r.m[s]=a[s]);if(c)var d=c(r)}for(e&&e(o);u<i.length;u++)n=i[u],r.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return r.O(d)},o=self["webpackChunke_commerce_full_stack_vue_demo"]=self["webpackChunke_commerce_full_stack_vue_demo"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=r.O(void 0,[504],(function(){return r(8318)}));o=r.O(o)})();
//# sourceMappingURL=app.0d5421b9.js.map